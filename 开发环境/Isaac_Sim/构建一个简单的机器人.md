# Building a Simple Robot in Isaac Sim 

## 概述
本节课程介绍了如何在 Isaac Sim 中构建一个简单的机器人。内容涵盖界面导航、创建底盘和车轮、配置物理属性以及设置关节以实现运动模拟。目标是掌握构建可与环境交互的基础机器人模型。

---

## 学习目标
- 熟悉 Isaac Sim 界面，高效管理仿真。
- 创建可视化网格并为基本几何体启用物理。
- 构建层级结构以组织机器人组件。
- 应用旋转关节（revolute joints）使车轮能够转动。
- 通过添加驱动力模拟机器人运动。

---

## Isaac Sim 界面导航

### 启动 Isaac Sim
- 在终端中进入 Isaac Sim 安装目录，例如：
  ```bash
  cd ~/isaac-sim
  ./isaac-sim.selector.sh
  ```
- 建议使用 Isaac Sim 4.5.0；部分说明也适用于 4.2.0。
- 本节无需启用 ROS Bridge 扩展。

### 用户界面组成
- **面板（Panels）**：如 Stage（场景层级）、Properties（属性）、Viewport（视口），支持自定义布局。
- **上下文菜单**：在视口或 Stage 中右键调出操作选项。
- **工具栏**：顶部提供常用功能，如创建对象、运行仿真、扩展管理等。

### 默认场景元素
- 启动后默认包含 `World` 和 `defaultLight` 等 prim。
- Isaac Sim 基于 OpenUSD（通用场景描述）框架，prim 是基本构建单元。

### 创建菜单（Create Menu）
- 可添加基本几何体（立方体、球体等）、物理场景、地面平面等。
- 支持导入机器人模型和环境资产。

### 视口导航控制
- **移动**：按住右键 + WASD（前后左右），Q/E（上下）。
- **旋转**：按住右键并拖动。
- **缩放**：滚轮，或 Alt + 右键。
- **平移**：按住中键拖动。

---

## 构建简单机器人

### 创建可视化网格
- 通过 `Create > Mesh > Cube` 添加立方体作为底盘。
- 此立方体仅为视觉网格，尚无物理属性。

### 启用物理仿真
- 点击 Play 按钮不会发生任何事，因为尚未启用物理。
- 通过 `Create > Physics > Physics Scene` 添加物理场景，默认重力沿 Z 轴向下（Isaac Sim 使用 Z-up 坐标系）。

### 为立方体添加物理
- 右键立方体 → `Add > Physics > Rigid Body with Colliders Preset`。
- 可视化碰撞体：`Show > Show by Type > Physics > Colliders > Selected`，显示绿色碰撞网格。

### 添加地面平面
- 通过 `Create > Physics > Ground Plane` 添加无限延伸的地面。
- 将立方体 Z 坐标设为 1 米，使其位于地面之上。
- 再次点击 Play，立方体将下落并停在地面。

> **注意**：不同资产导入器行为不同。URDF 导入器可能自带物理数据，而 Isaac Sim 原生导入器通常只导入视觉数据。

---

## 添加四个车轮

### 准备底盘
- 将立方体置于世界原点 (0, 0, 0)。
- 缩放为 (2, 1, 0.5)，X 方向长度用于容纳前后轮。

### 创建机器人层级结构
- 在 Stage 中右键 → `Create > Xform`，重命名为 `SimpleRobot`。
- 将立方体拖入 `SimpleRobot` 作为子对象。
- 将 `SimpleRobot` 整体沿 Z 轴上移 1 米，使底盘悬空。
- 设置立方体自身高度偏移为 0，避免双重抬升。

> **层级关系优势**：便于统一变换（如整体移动、旋转），简化复杂模型管理。

### 创建并定位车轮
- 在 `SimpleRobot` 下创建圆柱体：`Create > Mesh > Cylinder`。
- 旋转 X 轴 90°，缩放为 (0.75, 0.75, 0.25)。
- 平移至 (0.5, 0.75, 0)，命名为 `Front_Left_Wheel`。
- 复制该轮三次，分别命名为：
  - `Front_Right_Wheel`
  - `Rear_Left_Wheel`
  - `Rear_Right_Wheel`
- 确保所有车轮均为 `SimpleRobot` 的子对象。

### 为车轮启用物理
- 全选四个车轮 → 右键 → `Add > Physics > Rigid Body with Colliders Preset`。
- 点击 Play，车轮将因重力下落至地面。

---

## 配置关节与驱动

### 创建旋转关节（Revolute Joints）
- 选择底盘（Cube），按住 Ctrl 再选择一个车轮（如 `Front_Left_Wheel`）。
- 右键 → `Create > Physics > Joint > Revolute Joint`。
- **注意顺序**：先选父体（底盘），再选子体（车轮）。

### 配置关节轴
- 默认关节轴为 X，需改为 Y（车轮绕 Y 轴旋转）。
- 设置 `Local Rotation 0` 为 (0, 0, 0)。
- 设置 `Local Rotation 1` 为 (-90, 0, 0)，使关节对齐车轮方向。
- 重命名关节为 `Front_Left_Joint`。

### 创建其余三个关节
- 对每个车轮重复上述步骤，确保关节轴和旋转正确。
- 完成后将整个机器人下移，使车轮接触地面。

### 为后轮添加驱动力
- 仅对后轮关节（`Rear_Left_Joint` 和 `Rear_Right_Joint`）添加角驱动：
  - 右键关节 → `Add > Physics > Angular Drive`
  - 设置 `Damping = 10000`（高阻尼确保稳定速度控制）
  - 设置 `Target Velocity = 50`（单位：度/秒）

### 仿真测试
- 点击 Play，机器人应向前移动。

> **挑战**：尝试让左右后轮速度相反（一正一负），实现转向。

---

## 故障排查建议
- 确保车轮位置低于底盘，避免拖拽。
- 检查关节的 Body 0 和 Body 1 是否连接正确。
- 逐个禁用关节以定位问题。
- 核对所有参数（轴向、旋转、速度等）。

---

## 本节小结
成功构建了一个具备以下特性的简单机器人：
- 可视化底盘与车轮
- 物理碰撞与重力响应
- 层级化结构组织
- 旋转关节实现车轮转动
- 后轮角驱动实现前进运动

下一节将学习如何通过键盘控制机器人运动。

---

## 测验回顾

1. **如何在视口中向前移动相机？**  
   答：按住右键并使用 WASD 键。

2. **使立方体参与物理交互需添加什么？**  
   答：碰撞网格（Collision Mesh）。

3. **为何使用层级结构？**  
   答：便于组织组件并简化变换操作。

4. **旋转关节的主要作用？**  
   答：允许车轮绕固定轴旋转。

5. **如何实现后轮驱动前进？**  
   答：为后轮关节添加带速度控制的角驱动（Angular Drive）。
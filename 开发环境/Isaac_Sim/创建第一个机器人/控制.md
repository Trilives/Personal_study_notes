# Isaac Sim 笔记：控制你的第一个机器人

## 1. 核心概念

- **关节根 (Articulation Root)**：使物理引擎能够正确处理机器人的网格（Mesh）和关节（Joint）之间的交互，是实现真实物理模拟的基础。
    
- **差速控制器 (Differential Controller)**：用于根据输入的线速度和角速度，自动计算并分配机器人左右轮的速度。
    
- **OmniGraph / ActionGraph**：Omniverse 的可视化编程框架，通过节点连接实现控制逻辑。
    

---

## 2. 准备工作：设置关节根 (Articulation)

在添加控制器之前，必须先将机器人定义为“关节”结构：

1. 在 **Stage** 面板中，右键点击 `SimpleRobot` (Xform)。
    
2. 选择 **Add > Physics > Articulation Root**。
    
    - _注意：必须在创建控制器之前完成此操作，确保控制器能识别机器人结构。_
        

---

## 3. 设置差速控制器 (Differential Controller)

### 3.1 创建控制器

根据版本不同，操作路径如下：

- **Isaac Sim 4.2**: 菜单栏 `Isaac Utils` > `Common Omnigraphs` > `Differential Controller`。
    
- **Isaac Sim 4.5**: 菜单栏 `Tools` > `Robotics` > `OmniGraph Controllers` > `Differential Controller`。
    

### 3.2 参数配置

在弹出的配置窗口中设置：

- **Robot Prim**: 选择场景中的 `SimpleRobot`。
    
- **Wheel Radius**: 设置轮子半径（例如轮子直径 0.75，则半径填 `0.375`）。
    
- **Wheel Distance**: 轮距（设置为 `1.5`）。
    
- **Joints**: 指定受控关节。若要后轮驱动，输入对应的两个关节名称（如 `rear_right_joint` 和 `rear_left_joint`）。
    

---

## 4. 理解 OmniGraph 节点

打开生成的 `differential_controller` 图，主要包含四个节点：

1. **On Playback Tick**: 每帧执行一次，触发后续计算。
    
2. **Differential Controller**: 核心计算节点，将速度指令转换为关节速度。
    
3. **Articulation Controller**: 将计算出的速度指令发送给机器人的物理关节。
    
4. **MakeArray**: 汇总关节名称，便于传递给控制器。
    

---

## 5. 集成键盘控制 (Keyboard Input)

为了手动操作机器人，可以使用内置的键盘控制模板：

1. **删除** 之前创建的基础 OmniGraph。
    
2. **重新创建** 控制器（路径同上），但在配置窗口勾选 **Use Keyboard Control = True**。
    
3. **操作方式**：
    
    - 按下 **Play** 模拟。
        
    - 使用键盘 **W, A, S, D** 控制前后移动和转向。
        
    - _提示：若需调整灵敏度，可修改 OmniGraph 中的 `Constant Double` 节点数值。_
        

---

## 6. 常见问题排查 (Troubleshooting)

如果按下播放键后机器人不动，检查以下项：

- **Desired Velocity**: 检查差速控制器的期望速度是否为 0。
    
- **Articulation Root**: 确认是否已向 `SimpleRobot` 添加了 Articulation Root。
    
- **Collision Mesh**: 确认轮子是否有碰撞体（Collision Mesh）。
    
- **Ground Plane**: 场景中是否已创建地面（地面也是物理交互的前提）。
    
- **Physics Material**: 如果机器人打滑或颠簸，可能是因为轮子和地面的物理材质（Friction）未设置，这通常在后续模块中优化。
    

---

## 7. 总结与下一步

本课实现了通过可视化脚本控制机器人运动。下一步将学习如何为机器人添加**传感器 (Sensors)**，使其具备感知环境的能力。

**记得保存工作：`File > Save`**
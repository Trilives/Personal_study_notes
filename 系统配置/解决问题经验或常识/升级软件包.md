# 背景

用户在 Ubuntu 24.04（代号 noble）系统中执行 `sudo apt update` 后发现有 7 个软件包可升级。随后执行 `sudo apt upgrade`，但系统提示这些包因“阶段更新”（Phased Updates）被推迟，未实际升级。

---

# 可升级软件包列表

通过 `apt list --upgradable` 确认以下 7 个包待更新，均来自官方 `noble-updates` 源：

- dhcpcd-base
- gir1.2-mutter-14
- libmutter-14-0
- libwhoopsie0
- mutter-common
- mutter-common-bin
- whoopsie

这些包属于系统核心组件：

- `dhcpcd-base`：DHCP 客户端，用于网络配置。
- `mutter-*`：GNOME 桌面环境的窗口与合成管理器。
- `whoopsie` / `libwhoopsie0`：Ubuntu 错误报告服务（向 Canonical 提交崩溃日志）。

所有更新均为小版本补丁（如从 `1:10.0.6-1ubuntu3.1` 升级到 `1:10.0.6-1ubuntu3.2`），表明是安全修复或稳定性改进，无重大功能变更。

---

# 问题原因：分阶段更新（Phased Updates）

Ubuntu 对部分更新采用分阶段发布策略，逐步推送给用户群体，以降低大规模故障风险。用户的系统当前未被纳入首批接收范围，因此 `apt upgrade` 主动跳过这些包，并明确提示“因阶段更新而被推迟”。

此行为是设计特性，非错误或配置问题。

---

# 是否应升级？

建议升级，理由如下：

1. 更新内容包含安全补丁和 bug 修复。
2. 所有包来自 Ubuntu 官方 Main 仓库，兼容性高，风险极低。
3. 不涉及依赖结构变更，不会导致包被保留（kept back）或需要 `full-upgrade`。

---

# 升级方式

# 方式一：等待自动推送（推荐用于生产/关键系统）

- 无需操作。
- 通常在 1–3 天内，再次运行 `sudo apt update && sudo apt upgrade` 即可完成升级。

# 方式二：手动强制升级（适用于桌面用户或急需修复场景）

```bash
sudo apt install --only-upgrade \
  dhcpcd-base \
  gir1.2-mutter-14 \
  libmutter-14-0 \
  libwhoopsie0 \
  mutter-common \
  mutter-common-bin \
  whoopsie
```

此命令绕过分阶段限制，直接安装可用新版本。风险可控，因所涉包为成熟组件的小幅更新。

> 注意：不建议长期禁用分阶段更新机制，因其提供重要的质量缓冲。

---

# 关于 Ubuntu Pro 提示的说明

输出中提及的 “Get more security updates through Ubuntu Pro with 'esm-apps' enabled” 是针对其他第三方库（如 `libavcodec60` 等）的扩展安全维护（ESM）提示。  
**该提示与当前 7 个待升级包无关**。所列 7 个包属于 Ubuntu Main 仓库，在标准支持期内无需 Ubuntu Pro 即可获得完整安全更新。

---

# 后续验证

升级完成后，可通过以下命令确认无剩余可更新包：

```bash
apt list --upgradable
```

若输出为空或仅显示 “Listing... Done”，则表示系统已同步至最新可用状态。

---

# 附加建议

- 若使用 GNOME 桌面，建议在 Mutter 相关包升级后注销并重新登录，以确保新版本生效。
- 如需查看某包是否处于分阶段更新状态，可运行：
    
    ```bash
    apt policy <package-name>
    ```
    
    输出中若含 `phased xx%`，即表示分阶段比例。

---

本笔记基于 Ubuntu 24.04 LTS 的标准更新机制整理，适用于个人及一般服务器环境。生产环境建议结合变更管理流程评估升级时机。
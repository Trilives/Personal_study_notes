# VS Code SSH 跨主机文件传输笔记

## 1. 核心障碍

VS Code 的远程连接本质上是两个独立的 SSH 会话。虽然你在本地能看到两个窗口，但 **主机 A** 并不知晓 **主机 B** 的存在。因此，直接拖拽在两个远程窗口间无效。

## 2. 解决方案：SCP 命令

在主机 A 的终端（或跳板机）直接向主机 B 发起传输。

### 2.1 命令模板

```bash
scp -r [本地目录] [远程用户名]@[[远程IPv6地址]]:[目标路径]

```

### 2.2 实战操作

```bash
scp -r O6hand_robotarm/ hamigua@[240e:3b6:30f3:2c0c:7024:b0e0:a9a9:4202]:/home/hamigua/桌面/

```

---

## 3. IPv6 地址如何选择

当你输入 `ip addr` 时，可能会看到一个网卡下挂着 3-5 个 IPv6 地址。选择标准如下：

### 3.1 优先级排序

1. **Global Unicast Address (全球单播地址)**：
* **特征**：通常以 `2` 或 `3` 开头（如 `240e...`）。
* **用途**：**首选**。用于公网或跨路由访问，稳定性最高。


2. **Dynamic/Temporary Address (动态临时地址)**：
* **特征**：标记有 `secondary` 和 `temporary`。
* **用途**：不建议。这是为了保护隐私自动生成的，会定期更换，不适合作为 SSH 目标。


3. **Link-Local Address (链路本地地址)**：
* **特征**：以 `fe80::` 开头。
* **用途**：仅限同一局域网下的直连设备。使用时必须指定网卡接口（如 `fe80::...%eth0`），配置复杂。



### 3.2 筛选技巧

在终端执行以下命令，直接过滤出最可靠的那个地址：

```bash
ip -6 addr show | grep 'scope global' | grep -v 'temporary'

```

**结论：** 看到 `2` 开头的、没有 `temporary` 字样的地址，就是你要找的目标。

---

## 4. 常见问题排查

| 现象 | 原因 | 解决方法 |
| --- | --- | --- |
| **Temporary failure in name resolution** | 主机 A 不认识别名 `hand`。 | 使用完整 IPv6 地址，或在主机 A 的 `/etc/hosts` 增加记录。 |
| **Connection timed out** | 防火墙未开放 22 端口或 IPv6 路由不通。 | 尝试 `ping6 [IPv6地址]` 检查连通性。 |
| **Permission denied** | 目标路径（如 /home/hamigua/桌面/）权限不足。 | 先传到 `~/`（家目录），再在目标机 `mv` 移动。 |

---

## 5. 进阶：配置免密

为了避免每次传输都输入密码，在 **主机 A** 执行：

```bash
ssh-keygen -t rsa  # 一路回车
ssh-copy-id hamigua@[主机B的IPv6]

```